// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN

buildscript {
    repositories {
        mavenCentral()
		maven { url 'https://maven.google.com' }
        google()
        jcenter()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:3.4.0'
    }
}

allprojects {
    repositories {
		mavenCentral()
        google()
        jcenter()
		maven { url "https://s3.amazonaws.com/moat-sdk-builds" }
        maven { url 'https://maven.google.com' } // necessary for Android API 26

        //add vungle
        maven { url 'https://jitpack.io' }
        //add ironsource
        maven { url 'https://dl.bintray.com/ironsource-mobile/android-sdk'}
        flatDir {
            dirs 'libs'
        }
    }
}
([rootProject] + (rootProject.subprojects as List)).each {
    ext {
        it.setProperty("android.enableD8.desugaring", true)
        it.setProperty("android.useAndroidX", true)
        it.setProperty("android.enableJetifier", true)
    }
}
apply plugin: 'com.android.application'

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
**DEPS**
//导入所有的aar，避免一个个的敲
    fileTree(dir: 'libs', include: ['*.aar']).each { file ->
        api(name: file.name.lastIndexOf('.').with {
            it != -1 ? file.name[0..<it] : file.name
        }, ext: 'aar')
    }

    implementation 'com.android.support:appcompat-v7:28.0.0'
    implementation 'com.android.support:cardview-v7:28.0.0'

    implementation('com.mopub:mopub-sdk:5.12.0@aar') {
        transitive = true
        exclude group: 'com.mopub', module: 'mopub-sdk-rewardedvideo'
        exclude group: 'com.mopub', module: 'mopub-sdk-interstitial'
    }

    // AppLovin
    implementation 'com.applovin:applovin-sdk:9.11.6'
    implementation 'com.mopub.mediation:applovin:9.11.6.0'
// Facebook Audience Network
    implementation 'com.facebook.android:audience-network-sdk:5.8.0'
    implementation 'com.mopub.mediation:facebookaudiencenetwork:5.8.0.0'
// Google (AdMob & Ad Manager)
    implementation 'com.google.android.gms:play-services-ads:19.0.1'
    implementation 'com.mopub.mediation:admob:19.0.1.0'
// Unity Ads
    implementation 'com.unity3d.ads:unity-ads:3.4.2'
    implementation 'com.mopub.mediation:unityads:3.4.2.0'
// Vungle
    implementation 'com.vungle:publisher-sdk-android:6.5.3'
    implementation 'com.mopub.mediation:vungle:6.5.3.0'
// ironSource
    implementation 'com.ironsource.sdk:mediationsdk:6.15.0.1@jar'
    implementation 'com.mopub.mediation:ironsource:6.15.0.1.0'
    // Mintegral
    implementation 'com.mintegral.msdk:mtgbanner:13.0.41'
    implementation 'com.mintegral.msdk:interstitialvideo:13.0.41'
    implementation 'com.mintegral.msdk:videojs:13.0.41'
    implementation 'com.mintegral.msdk:nativeex:13.0.41'
    implementation 'com.mintegral.msdk:mtgjscommon:13.0.41'
    implementation 'com.mintegral.msdk:playercommon:13.0.41'
    implementation 'com.mintegral.msdk:reward:13.0.41'
    implementation 'com.mintegral.msdk:videocommon:13.0.41'
    implementation 'com.mintegral.msdk:common:13.0.41'
    implementation 'com.mintegral.msdk:mtgnative:13.0.41'
    implementation 'com.mintegral.msdk:mtgbid:13.0.41'
    implementation 'com.mopub.mediation:mintegral:13.0.41.0'

    //facebook analytics
    implementation 'com.facebook.android:facebook-android-sdk:[5,6)'
    //adjust
    implementation 'com.adjust.sdk:adjust-android:4.21.0'
    implementation 'com.google.android.gms:play-services-analytics:17.0.0'
    implementation 'com.android.installreferrer:installreferrer:1.0'

    implementation 'com.android.support:multidex:1.0.2'
}
//import com.android.build.OutputFile
//ext.abiCodes = ['x86':1,'armeabi-v7a':2 ,'arm64-v8a':3]
//android.applicationVariants.all { variant ->
//    variant.outputs.each { output ->
//        def baseAbiVersionCode =
//                project.ext.abiCodes.get(output.getFilter(OutputFile.ABI))
//        if (baseAbiVersionCode != null) {
//            output.versionCodeOverride =
//                    baseAbiVersionCode * 1000 + variant.versionCode
//        }
//    }
//}
//删除assets下指定文件夹
android.applicationVariants.all { variant ->
    //if (variant.buildType.name == 'release') {//release版本
        variant.mergeAssets.doLast {
            //删除assets文件夹下的所有zip文件
            delete(fileTree(dir: variant.mergeAssets.outputDir, includes: ['Editor/**','Ios/**']))
        }
    //}
}
android {
    compileSdkVersion **APIVERSION**
    buildToolsVersion '**BUILDTOOLS**'
	compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
	dexOptions {
        javaMaxHeapSize "4g"
    }
    defaultConfig {
		manifestPlaceholders.put("APPLOG_SCHEME", "rangersapplog.0514475e6b0a281c".toLowerCase())
		multiDexEnabled true
        minSdkVersion **MINSDKVERSION**
        targetSdkVersion **TARGETSDKVERSION**
        applicationId '**APPLICATIONID**'
        ndk {
            abiFilters **ABIFILTERS**
        }
        versionCode **VERSIONCODE**
        versionName '**VERSIONNAME**'
    }

	//splits {
    //    abi {
    //        enable true
    //        reset()
    //        include 'x86', 'armeabi-v7a', 'arm64-v8a'
    //        universalApk true
    //    }
    //}
    lintOptions {
        abortOnError false
    }

    aaptOptions {
        noCompress '.unity3d', '.ress', '.resource', '.obb','.bundle'
    }**SIGN**

    buildTypes {
        debug {
            minifyEnabled **MINIFY_DEBUG**
            useProguard **PROGUARD_DEBUG**
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt'**USER_PROGUARD**
            jniDebuggable true
        }
        release {
            minifyEnabled **MINIFY_RELEASE**
            useProguard **PROGUARD_RELEASE**
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt'**USER_PROGUARD****SIGNCONFIG**
        }
    }**PACKAGING_OPTIONS****SPLITS**
**BUILT_APK_LOCATION**
}**SPLITS_VERSION_CODE****SOURCE_BUILD_SETUP**
